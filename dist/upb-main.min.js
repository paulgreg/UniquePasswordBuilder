function scrypt(n,r,t,o,e,u,f,a){"use strict";function h(n){function r(n){for(var r=0,p=n.length;p>=64;){var l,v,g,y,w,d=o,A=e,b=u,m=f,I=a,j=h,x=c,E=i;for(v=0;16>v;v++)g=r+4*v,s[v]=(255&n[g])<<24|(255&n[g+1])<<16|(255&n[g+2])<<8|255&n[g+3];for(v=16;64>v;v++)l=s[v-2],y=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,l=s[v-15],w=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,s[v]=(y+s[v-7]|0)+(w+s[v-16]|0)|0;for(v=0;64>v;v++)y=(((I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7))+(I&j^~I&x)|0)+(E+(t[v]+s[v]|0)|0)|0,w=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&A^d&b^A&b)|0,E=x,x=j,j=I,I=m+y|0,m=b,b=A,A=d,d=y+w|0;o=o+d|0,e=e+A|0,u=u+b|0,f=f+m|0,a=a+I|0,h=h+j|0,c=c+x|0,i=i+E|0,r+=64,p-=64}}var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=1779033703,e=3144134277,u=1013904242,f=2773480762,a=1359893119,h=2600822924,c=528734635,i=1541459225,s=new Array(64);r(n);var p,l=n.length%64,v=n.length/536870912|0,g=n.length<<3,y=56>l?56:120,w=n.slice(n.length-l,n.length);for(w.push(128),p=l+1;y>p;p++)w.push(0);return w.push(v>>>24&255),w.push(v>>>16&255),w.push(v>>>8&255),w.push(v>>>0&255),w.push(g>>>24&255),w.push(g>>>16&255),w.push(g>>>8&255),w.push(g>>>0&255),r(w),[o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,e>>>24&255,e>>>16&255,e>>>8&255,e>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,h>>>24&255,h>>>16&255,h>>>8&255,h>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255]}function c(n,r,t){function o(){for(var n=u-1;n>=u-4;n--){if(f[n]++,f[n]<=255)return;f[n]=0}}n=n.length<=64?n:h(n);var e,u=64+r.length+4,f=new Array(u),a=new Array(64),c=[];for(e=0;64>e;e++)f[e]=54;for(e=0;e<n.length;e++)f[e]^=n[e];for(e=0;e<r.length;e++)f[64+e]=r[e];for(e=u-4;u>e;e++)f[e]=0;for(e=0;64>e;e++)a[e]=92;for(e=0;e<n.length;e++)a[e]^=n[e];for(;t>=32;)o(),c=c.concat(h(a.concat(h(f)))),t-=32;return t>0&&(o(),c=c.concat(h(a.concat(h(f))).slice(0,t))),c}function i(n,r,t,o){var e,u,f=n[0]^r[t++],a=n[1]^r[t++],h=n[2]^r[t++],c=n[3]^r[t++],i=n[4]^r[t++],s=n[5]^r[t++],p=n[6]^r[t++],l=n[7]^r[t++],v=n[8]^r[t++],g=n[9]^r[t++],y=n[10]^r[t++],w=n[11]^r[t++],d=n[12]^r[t++],A=n[13]^r[t++],b=n[14]^r[t++],m=n[15]^r[t++],I=f,j=a,x=h,E=c,C=i,N=s,T=p,k=l,q=v,z=g,B=y,D=w,F=d,G=A,H=b,J=m;for(u=0;8>u;u+=2)e=I+F,C^=e<<7|e>>>25,e=C+I,q^=e<<9|e>>>23,e=q+C,F^=e<<13|e>>>19,e=F+q,I^=e<<18|e>>>14,e=N+j,z^=e<<7|e>>>25,e=z+N,G^=e<<9|e>>>23,e=G+z,j^=e<<13|e>>>19,e=j+G,N^=e<<18|e>>>14,e=B+T,H^=e<<7|e>>>25,e=H+B,x^=e<<9|e>>>23,e=x+H,T^=e<<13|e>>>19,e=T+x,B^=e<<18|e>>>14,e=J+D,E^=e<<7|e>>>25,e=E+J,k^=e<<9|e>>>23,e=k+E,D^=e<<13|e>>>19,e=D+k,J^=e<<18|e>>>14,e=I+E,j^=e<<7|e>>>25,e=j+I,x^=e<<9|e>>>23,e=x+j,E^=e<<13|e>>>19,e=E+x,I^=e<<18|e>>>14,e=N+C,T^=e<<7|e>>>25,e=T+N,k^=e<<9|e>>>23,e=k+T,C^=e<<13|e>>>19,e=C+k,N^=e<<18|e>>>14,e=B+z,D^=e<<7|e>>>25,e=D+B,q^=e<<9|e>>>23,e=q+D,z^=e<<13|e>>>19,e=z+q,B^=e<<18|e>>>14,e=J+H,F^=e<<7|e>>>25,e=F+J,G^=e<<9|e>>>23,e=G+F,H^=e<<13|e>>>19,e=H+G,J^=e<<18|e>>>14;r[o++]=n[0]=I+f|0,r[o++]=n[1]=j+a|0,r[o++]=n[2]=x+h|0,r[o++]=n[3]=E+c|0,r[o++]=n[4]=C+i|0,r[o++]=n[5]=N+s|0,r[o++]=n[6]=T+p|0,r[o++]=n[7]=k+l|0,r[o++]=n[8]=q+v|0,r[o++]=n[9]=z+g|0,r[o++]=n[10]=B+y|0,r[o++]=n[11]=D+w|0,r[o++]=n[12]=F+d|0,r[o++]=n[13]=G+A|0,r[o++]=n[14]=H+b|0,r[o++]=n[15]=J+m|0}function s(n,r,t,o,e){for(;e--;)n[r++]=t[o++]}function p(n,r,t,o,e){for(;e--;)n[r++]^=t[o++]}function l(n,r,t,o,e){s(n,0,r,t+16*(2*e-1),16);for(var u=0;2*e>u;u+=2)i(n,r,t+16*u,o+8*u),i(n,r,t+16*u+16,o+8*u+16*e)}function v(n,r,t){return n[r+16*(2*t-1)]}function g(n){for(var r=[],t=0;t<n.length;t++){var o=n.charCodeAt(t);128>o?r.push(o):o>127&&2048>o?(r.push(o>>6|192),r.push(63&o|128)):(r.push(o>>12|224),r.push(o>>6&63|128),r.push(63&o|128))}return r}function y(n){for(var r="0123456789abcdef".split(""),t=n.length,o=[],e=0;t>e;e++)o.push(r[n[e]>>>4&15]),o.push(r[n[e]>>>0&15]);return o.join("")}function w(n){for(var r,t,o,e,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),f=n.length,a=[],h=0;f>h;)r=f>h?n[h++]:0,t=f>h?n[h++]:0,o=f>h?n[h++]:0,e=(r<<16)+(t<<8)+o,a.push(u[e>>>18&63]),a.push(u[e>>>12&63]),a.push(u[e>>>6&63]),a.push(u[e>>>0&63]);return f%3>0&&(a[a.length-1]="=",f%3===1&&(a[a.length-2]="=")),a.join("")}function d(){for(var n=0;32*o>n;n++){var r=4*n;E[z+n]=(255&N[r+3])<<24|(255&N[r+2])<<16|(255&N[r+1])<<8|(255&N[r+0])<<0}}function A(n,r){for(var t=n;r>t;t+=2)s(C,t*(32*o),E,z,32*o),l(T,E,z,B,o),s(C,(t+1)*(32*o),E,B,32*o),l(T,E,B,z,o)}function b(n,r){for(var t=n;r>t;t+=2){var e=v(E,z,o)&q-1;p(E,z,C,e*(32*o),32*o),l(T,E,z,B,o),e=v(E,B,o)&q-1,p(E,B,C,e*(32*o),32*o),l(T,E,B,z,o)}}function m(){for(var n=0;32*o>n;n++){var r=E[z+n];N[4*n+0]=r>>>0&255,N[4*n+1]=r>>>8&255,N[4*n+2]=r>>>16&255,N[4*n+3]=r>>>24&255}}function I(n,r,t,o,e){!function u(){setTimeout(function(){o(n,r>n+t?n+t:r),n+=t,r>n?u():e()},0)}()}function j(r){var t=c(n,N,e);return"base64"===r?w(t):"hex"===r?y(t):t}var x=1;if(1>t||t>31)throw new Error("scrypt: logN not be between 1 and 31");var E,C,N,T,k=1<<31>>>0,q=1<<t>>>0;if(o*x>=1<<30||o>k/128/x||o>k/256||q>k/128/o)throw new Error("scrypt: parameters are too large");"string"==typeof n&&(n=g(n)),"string"==typeof r&&(r=g(r)),"undefined"!=typeof Int32Array?(E=new Int32Array(64*o),C=new Int32Array(32*q*o),T=new Int32Array(16)):(E=[],C=[],T=new Array(16)),N=c(n,r,128*x*o);var z=0,B=32*o;"function"==typeof u&&(a=f,f=u,u=1e3),0>=u?(d(),A(0,q),b(0,q),m(),f(j(a))):(d(),I(0,q,2*u,A,function(){I(0,q,2*u,b,function(){m(),f(j(a))})}))}"undefined"!=typeof module&&(module.exports=scrypt);
!function(o){o.makeHashHumanReadable=function(o){var e=["!","$","+","-","=","_",".",":",";",",","?","#","%","&","(",")","[","]","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="";for(i=0;i<o.length;i+=2){var r=o[i]+o[i+1];n+=e[r%e.length]}return n},o.generate=function(e,n,r,a,i,s){if(!r)throw new Error("master password should not be empty");var n=n||1024;if(!o.isPowerOfTwo(n))throw new Error("rounds should be a power of two, got "+n);var t=+new Date,d=Math.log2(n),w=e.protocol+"//"+e.host,a=a&&0!=a?"-keyidx:"+a:"",u=w+a;scrypt(r,u,d,8,32,function(e){var r=o.makeHashHumanReadable(e);if(!s&&console&&console.log){var a=" in "+(+new Date-t)/1e3+" seconds",d=n>1?" (in "+n+" rounds)":"";console.log("UniquePasswordBuilder - Generated password: "+r+" for salt (domain + key index): "+u+a+d)}i(r)})},o.isPowerOfTwo=function(o){return 0!=o&&!(o&o-1)}}(window.UniquePasswordBuilder=window.UniquePasswordBuilder||{});